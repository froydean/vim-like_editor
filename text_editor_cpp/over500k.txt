Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1     Change mode buttons
Change mode buttons Action
i Enter text before the cursor.
I Go to the beginning of the line and start entering text.
S Go to the end of the line and start typing.
A Delete the contents of the row and start typing.
r Replace one character under the cursor.
: Activating the command input mode.
/ Activates search mode until the end of the document.
? Activates search mode until the start of the document.

Table 2     Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP Raises the cursor one page.
PAGE_DOWN Moves the cursor down one page.
gg Moves the cursor to the first page of the text.
G Moves the cursor to the last page of the text.

Table 3     Navigation command buttons
Navigation command buttons Action
^ Moves the cursor to the start of the line.
$ Moves the cursor to the end of the line.
w Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x Delete the character after the cursor.
diw Delete the word under the cursor, including one space on the right.
dd Cut (copy and delete) the current line.
y Copy the current line.
yw Copy the word under the cursor.
p Insert after the cursor.
NG Go to the line with the number N.

Table 4     Find commands and buttons
Commands  Action
/ <text> Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text> Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons 
n Repeat search forward.
N Repeat search back.

Table 5     Commands
Commands  Action
o <filename> Open the file <filename>.
x Write to the current file and close it.
w Write to the current file.
w <filename> Write to file <filename>.
q Exit program.
q! Exit program without saving current file.
wq! Write to the current file and close it.
num Go to the line with the number <num>.
h Program help.
   
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands Action
Command mode
set num Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands Action
Navigation and editing mode
u Canceling the last command.
U Cancels all changes to the current line.
Command mode
e! Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands Action
Command mode
sy Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands Action
Navigation and editing mode
W Move the cursor to the next space (group of spaces).
B Moves the cursor to the previous space (group of spaces).
X Delete the character before the cursor.
dw Remove characters from the cursor to the end of the word including the space on the right.
dE Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0 Delete characters from the beginning of the line to the current cursor position.
d$ or D Delete characters from the current cursor position to the end of the line.
y^ or y0 Copy characters from the beginning of the line to the current cursor position.
y$ Copy characters from the current cursor position to the end of the line.
P Insert before the cursor.
J Merges the current line with the next one.
Input mode
a Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report.   

5. Report   s content
Your report must contain the following items, and MUST also be readable.
1. Goal.
2. Task.
3. Theory     you should briefly outline the theory you have learned to do your lab work.
4. Results     you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5. Additional task (optional).
6. Conclusion.
7. References     a properly designed bibliographic list of references that you used.
   
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and reg  nerationYou are the r  al enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend   s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
             (Boku no Sensou)
                            (Shinsei kamattechan)
             (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1     Change mode buttons
Change mode buttons Action
i Enter text before the cursor.
I Go to the beginning of the line and start entering text.
S Go to the end of the line and start typing.
A Delete the contents of the row and start typing.
r Replace one character under the cursor.
: Activating the command input mode.
/ Activates search mode until the end of the document.
? Activates search mode until the start of the document.

Table 2     Navigation buttons
Navigation buttons Action
RIGHT Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP Raises the cursor one page.
PAGE_DOWN Moves the cursor down one page.
gg Moves the cursor to the first page of the text.
G Moves the cursor to the last page of the text.

Table 3     Navigation command buttons
Navigation command buttons Action
^ Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x Delete the character after the cursor.
diw Delete the word under the cursor, including one space on the right.
dd Cut (copy and delete) the current line.
y Copy the current line.
yw Copy the word under the cursor.
p Insert after the cursor.
NG Go to the line with the number N.

Table 4     Find commands and buttons
Commands  Action
/ <text> Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text> Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons 
n Repeat search forward.
N Repeat search back.

Table 5     Commands
Commands  Action
o <filename> Open the file <filename>.
x Write to the current file and close it.
w Write to the current file.
w <filename> Write to file <filename>.
q Exit program.
q! Exit program without saving current file.
wq! Write to the current file and close it.
num Go to the line with the number <num>.
h Program help.
   
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands Action
Command mode
set num Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands Action
Navigation and editing mode
u Canceling the last command.
U Cancels all changes to the current line.
Command mode
e! Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands Action
Command mode
sy Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands Action
Navigation and editing mode
W Move the cursor to the next space (group of spaces).
B Moves the cursor to the previous space (group of spaces).
X Delete the character before the cursor.
dw Remove characters from the cursor to the end of the word including the space on the right.
dE Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0 Delete characters from the beginning of the line to the current cursor position.
d$ or D Delete characters from the current cursor position to the end of the line.
y^ or y0 Copy characters from the beginning of the line to the current cursor position.
y$ Copy characters from the current cursor position to the end of the line.
P Insert before the cursor.
J Merges the current line with the next one.
Input mode
a Enter text after the cursor.
o Create a line at the top and start typing.
O Create a line at the bottom and start typing.
R Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report.   

5. Report   s content
Your report must contain the following items, and MUST also be readable.
1. Goal.
2. Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5. Additional task (optional).
6. Conclusion.
7. References     a properly designed bibliographic list of references that you used.
   
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and reg  nerationYou are the r  al enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend   s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
             (Boku no Sensou)
                            (Shinsei kamattechan)
             (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1     Change mode buttons
Change mode buttons Action
i Enter text before the cursor.
I Go to the beginning of the line and start entering text.
S Go to the end of the line and start typing.
A Delete the contents of the row and start typing.
r Replace one character under the cursor.
: Activating the command input mode.
/ Activates search mode until the end of the document.
? Activates search mode until the start of the document.

Table 2     Navigation buttons
Navigation buttons Action
RIGHT Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G Moves the cursor to the last page of the text.

Table 3     Navigation command buttons
Navigation command buttons Action
^ Moves the cursor to the start of the line.
$ Moves the cursor to the end of the line.
w Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x Delete the character after the cursor.
diw Delete the word under the cursor, including one space on the right.
dd Cut (copy and delete) the current line.
y Copy the current line.
yw Copy the word under the cursor.
p Insert after the cursor.
NG Go to the line with the number N.

Table 4     Find commands and buttons
Commands  Action
/ <text> Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text> Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons 
n Repeat search forward.
N Repeat search back.

Table 5     Commands
Commands  Action
o <filename> Open the file <filename>.
x Write to the current file and close it.
w Write to the current file.
w <filename> Write to file <filename>.
q Exit program.
q! Exit program without saving current file.
wq! Write to the current file and close it.
num Go to the line with the number <num>.
h Program help.
   
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands Action
Command mode
set num Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands Action
Navigation and editing mode
u Canceling the last command.
U Cancels all changes to the current line.
Command mode
e! Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands Action
Command mode
sy Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands Action
Navigation and editing mode
W Move the cursor to the next space (group of spaces).
B Moves the cursor to the previous space (group of spaces).
X Delete the character before the cursor.
dw Remove characters from the cursor to the end of the word including the space on the right.
dE Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0 Delete characters from the beginning of the line to the current cursor position.
d$ or D Delete characters from the current cursor position to the end of the line.
y^ or y0 Copy characters from the beginning of the line to the current cursor position.
y$ Copy characters from the current cursor position to the end of the line.
P Insert before the cursor.
J Merges the current line with the next one.
Input mode
a Enter text after the cursor.
o Create a line at the top and start typing.
O Create a line at the bottom and start typing.
R Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report.   

5. Report   s content
Your report must contain the following items, and MUST also be readable.
1. Goal.
2. Task.
3. Theory     you should briefly outline the theory you have learned to do your lab work.
4. Results     you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5. Additional task (optional).
6. Conclusion.
7. References     a properly designed bibliographic list of references that you used.
   
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and reg  nerationYou are the r  al enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend   s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
             (Boku no Sensou)
                            (Shinsei kamattechan)
             (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"
this is not lagging type of editor! Yas!
course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!
Peter the Great St. Petersburg Polytechnic University
Institute of cybersecurity and information security









GUIDELINES FOR LABORATORY WORK # 3
 "Text editor"

course "Object-Oriented Programming"











Saint-Petersburg
2020

Content
1. Task 3
2. Theory 4
3. Basic task 5
3.1. Technical specification 5
4. Additional tasks 8
4.1. Tier 1 8
4.2. Tier 2 8
4.3. Tier 3 8
4.4. Tier 4 8
4.5. Tier 5 9
4.6. Tier 6 9
5. Report's content 10
6. Hints 11


1. Task
Develop a text editor in C++. Basic requirement:
- the Program must be written in C++ using STL and / or BOOST for any OS chosen by the student;
- the program should be developed using MVC design pattern;
- the program must have a UML class diagram;
- the program must have a TUI --- Text User Interface. For TUI development, you can use any open-source libraries (for example, ncurses). If the libraries are written in C, the student must develop a wrapper class to use the functionality of this C library using the Adapter pattern;
- the program should work with 1-byte text encoding;
- to work with text, the student must use their own string class in the form of a static or dynamic library. It is forbidden to modify the source code of this class. If any functionality does not meet the needs of the student, the student must implement a new class with the necessary functionality based on the existing one using the Decorator pattern;
- the application should not "hang" when working with large files (for example, reading/saving a file of 500K characters takes no longer than a second).
   
2. Theory
For the successful execution of the laboratory work it is necessary to study the following topics:
- what is a pattern;
- what they are for;
- learn the necessary patterns: MVC, adapter, decorator and etc.;
- static or dynamic library.
   
3. Basic task
3.1. Technical specification
TUI must support the cursor and status bar. The status bar should display: current operating mode, file name, line number / lines total.
The app supports 4 modes of operation:
- navigation and editing     move the cursor over the text, scroll through the pages, go to the desired line, edit the text: copy, paste, cut a line/word. When you enter command buttons, they are NOT displayed on the screen;
- text input     regular text input. Backspace, delete, insert, and all navigation actions should work;
- command input     the command input is displayed on the command line. Backspace should work on the command line
- search     as command mode, but for search.
Navigation mode     the main mode of operation, from this mode you can switch to "input Mode", "command Mode" and "search Mode". When you start the program, it starts working in this mode (see Picture 1).

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star

[Verse 1]
Randorii kyou wa garaaki de lucky day
Kattarii abura yogore mo kore de bye bye
Dare da, dare da, atama no naka yobikakeru koe wa
Are ga hoshii, kore ga hoshii to utatteiru
[Pre-Chorus]
Shiawase ni naritai
Rakushite ikite itai
Kono te ni tsukamitai
Anata no sono mune no naka

[Chorus]
Happy day ume tsukushite
Rest in peace made ikou ze
Itsuka mita jigoku mo ii tokoro
Ai wo baramaite
I love you kenashite kure
Zenbu ubatte waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasur  chatten da

[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a b  autiful star
Doryoku, mirai, a beautiful star

[Verse 2]
Yon, yon, yon, san de hazureru tansansui
Hangurii kojirasete hakisou na jinsei
Yamanai ame wa nai you ni saki ni sono kasa wo kure yo
Are ga hoshii, kore ga hoshii
Subete hoshii, tada munashii
You might also like
KICK BACK
             (Kenshi Yonezu)
          (Fujii Kaze) -                       (Shinunoga E-Wa) (Romanized)
Genius Romanizations
Nobody Gets Me
SZA
[Bridge]
Shiawase ni naritai
Rakushite ikite itai
Zenbu mechakucha ni shitai
Nanimo kamo keshisaritai
Anata no sono mune no naka

[Chorus]
Lucky de ume tsukushite
Rest in peace made ikou ze
Yoi ko dake mukaeru tengoku ja
Doumo ikirannai
I love you kenashite, unatte
Waratte kure my honey
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka wasurechatten da

[Post-Chorus]
Happy, lucky
Konnichiwa, baby
Yoi ko de itai
Sorya tsumaranai
Happy, lucky
Konnichiwa, baby, so sweet
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Nanka sugoi yoi kanji
[Refrain]
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
Doryoku, mirai, a beautiful star
(Ha, ha, ha, ha)
For basic requirements see the tables below. In the search mode and in the command search mode, you must press enter to activate the command, in other cases it is NOT necessary.
Table 1 — Change mode buttons
Change mode buttons	Action
i	Enter text before the cursor.
I	Go to the beginning of the line and start entering text.
S	Go to the end of the line and start typing.
A	Delete the contents of the row and start typing.
r	Replace one character under the cursor.
:	Activating the command input mode.
/	Activates search mode until the end of the document.
?	Activates search mode until the start of the document.

Table 2 — Navigation buttons
Navigation buttons	Action
RIGHT	Moves the cursor one position to the right if it is the end of the line moves to the first position of the next line.
LEFT	Moves the cursor one position to the left if this is the beginning of the line moves to the end of the previous line.
UP	Moves the cursor up one position (if next line shorter, then moves to the end of this line) if this is the beginning of the screen doing a scroll.
DOWN	Moves the cursor one position (if next line shorter, then moves to the end of this line) down if it is the end of the screen doing a scroll.
PAGE_UP	Raises the cursor one page.
PAGE_DOWN	Moves the cursor down one page.
gg	Moves the cursor to the first page of the text.
G	Moves the cursor to the last page of the text.

Table 3 — Navigation command buttons
Navigation command buttons	Action
^	Moves the cursor to the start of the line.
$	Moves the cursor to the end of the line.
w	Move the cursor to the end of a word to the right of the cursor (if the cursor is at the end of a word, then move the cursor to the end of the next word).
b	Move the cursor to the beginning of the word to the left of the cursor (if the cursor is at the beginning of the word, then move the cursor to the beginning of the previous word).
x	Delete the character after the cursor.
diw	Delete the word under the cursor, including one space on the right.
dd	Cut (copy and delete) the current line.
y	Copy the current line.
yw	Copy the word under the cursor.
p	Insert after the cursor.
NG	Go to the line with the number N.

Table 4 — Find commands and buttons
Commands 	Action
/ <text>	Search for the <text> string from the cursor to the end of the file. If a line is found, move the cursor to the beginning of the line.
? <text>	Search for the <text> string from the cursor to the beginning of the file. If a line is found, move the cursor to the beginning of the line.
Buttons	
n	Repeat search forward.
N	Repeat search back.

Table 5 — Commands
Commands 	Action
o <filename>	Open the file <filename>.
x	Write to the current file and close it.
w	Write to the current file.
w <filename>	Write to file <filename>.
q	Exit program.
q!	Exit program without saving current file.
wq!	Write to the current file and close it.
num	Go to the line with the number <num>.
h	Program help.
 
4. Additional tasks
Additional tasks should be done in order, otherwise points for them will not be counted.
4.1. Tier 1
Implement the commands from the table below. Use the Command pattern to implement all commands.
Commands	Action
Command mode
set num	Turn on/To disable line numbering.

4.2. Tier 2
Implement the commands from the table below. Add functionality for storing command history using the Singleton pattern
Commands	Action
Navigation and editing mode
u	Canceling the last command.
U	Cancels all changes to the current line.
Command mode
e!	Undo all changes.

4.3. Tier 3
Implement the commands from the table below. The student has the right to choose any syntax and implement its highlighting. Evaluate the possibility of applying the Decorator pattern.
Commands	Action
Command mode
sy	Enable syntax highlighting.

4.4. Tier 4
Implement the commands from the table below.
Commands	Action
Navigation and editing mode
W	Move the cursor to the next space (group of spaces).
B	Moves the cursor to the previous space (group of spaces).
X	Delete the character before the cursor.
dw	Remove characters from the cursor to the end of the word including the space on the right.
dE	Delete characters from the cursor to the end of the word excluding the space on the right.
d^ or d0	Delete characters from the beginning of the line to the current cursor position.
d$ or D	Delete characters from the current cursor position to the end of the line.
y^ or y0	Copy characters from the beginning of the line to the current cursor position.
y$	Copy characters from the current cursor position to the end of the line.
P	Insert before the cursor.
J	Merges the current line with the next one.
Input mode
a	Enter text after the cursor.
o	Create a line at the top and start typing.
O	Create a line at the bottom and start typing.
R	Start entering text and replace the current characters under the cursor.

4.5. Tier 5
Add support for Unicode.
4.6. Tier 6
Using additional UML diagrams in the report. 

5. Report’s content
Your report must contain the following items, and MUST also be readable.
1.	Goal.
2.	Task.
3.	Theory — you should briefly outline the theory you have learned to do your lab work.
4.	Results — you should describe the process of work: there must be a UML diagram, a description of the implementation idea, and a user's guide.
5.	Additional task (optional).
6.	Conclusion.
7.	References — a properly designed bibliographic list of references that you used.
 
6. Hints
Think a day, two, three before you start writing code, otherwise there will be a lot of hastily written "crooked" functions.

[Intro]La-la-la-la[Refrain]Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-tiBa-ba-ri-as-ras-ti-ti-taBa-ba-ri-as-ras-ti-ti-ti-ras-ti-tiRastis! Rastis! Ra-ti-ti-la...[Verse 1]
Let's start a new life from the darkness
Until the light reveals the end
Fear, hate, sorrow, desperation
Even you look miserable
Look down from above, I feel awful
The time has come, let's all go home
Sinister faces, growing curses
This is my last war... La-la-la-la

[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]Destruction and regеnerationYou are the rеal enemy (Rastis! Rastis! Ra-ti-ti-la)

[Verse 2]
The only memory left is trauma
Imaginary friend’s kind words
The evening train was shaking
I purified the imperfect flowers
The pain in my heart getting higher
My comedy show at its peak
The frogs were crying on our way home
This is my last war... La-la-la-la
You might also like
僕の戦争 (Boku no Sensou)
神聖かまってちゃん (Shinsei kamattechan)
米津玄師 (Kenshi Yonezu) - KICK BACK (Romanized)
Genius Romanizations
Flowers
Miley Cyrus
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)

[Post-Chorus]
Destruction and regeneration
You are the real enemy (Rastis! Rastis! Ra-ti-ti-la)

[Bridge]
Do, do-do-do, do, do, do, do-do (La-la-la, la, la)
Do-do, do-do-do, do, do, do-do (La-la, la, la-la)
Do, do-do-do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la-la)
Do, do-do-do, do, do, do, do-do (La-la, la, la)
Do-do, do, do, do, do, do (La-la, la, la)
Do, do-do-do, do, do, do, do-do (La-la, la, la, la, la)
Do-do, do, do, do, do, do (La, la-la, la)

[Verse 3]
Kaeri michi wo nakushita fuukei (La-la, la, la)
Yuuyake koyake sakasama ni (La-la, la, la-la)
Gekou jikan naki dasu chime to (La-la, la, la)
Dandan to okkochite yuku (La-la, la, la-la)
Kaeri michi wo owarasenai tte (La-la, la, la)
Naite ii yo ima dake wa (La-la, la, la-la)
Senrozoi ni kie chatta nanohana (La-la, la, la)
Rainen mata saite nante (La-la-la-la)
[Chorus]
Angels playing disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Kaerimichi wo nakushita fuukei)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Yuuyakekoyake sakasama ni)
Children cling to their coins (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Gekou jikan tanin no kagefumi)
Squeezing out their wisdom (Rastis! Rastis! Ra-ti-ti-la-la-la-la)
(Kidzuitara yoake hitorikiri)
Angels planning disguised (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Hitorikiri wo owarasenai tte)
With devil's faces (Ba-ba-ri-as-ras-ti-ti-ta)
(Naite ii yo ima dake wa)
Children cling on to their (Ba-ba-ri-as-ras-ti-ti-ti-ras-ti-ti)
(Ashita no junbi ga douse mata arushi)
Very last coins (Rastis! Rastis! Ra-ti-ti-la...)
(Shukudai yatte nenakucha ne)

[Post-Chorus]
Nenakucha ne (Rastis! Rastis! Ra-ti-ti-la...)

[Outro]
War!
(My) War!
(My) War!
Rastis! Rastis! Rastis! Rastis!